(()=>{var e={556:(e,t,s)=>{e.exports=s(694)()},694:(e,t,s)=>{"use strict";var n=s(925);function a(){}function r(){}r.resetWarningCache=a,e.exports=function(){function e(e,t,s,a,r,o){if(o!==n){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:a};return s.PropTypes=s,s}},925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},942:(e,t)=>{var s;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var s=arguments[t];s&&(e=o(e,r(s)))}return e}function r(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var s in e)n.call(e,s)&&e[s]&&(t=o(t,s));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0===(s=function(){return a}.apply(t,[]))||(e.exports=s)}()}},t={};function s(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,s),r.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.domReady;var t=s.n(e);const n=window.wp.element;var a=s(942),r=s.n(a);const o=window.lodash;var d=s(556),i=s.n(d);const l={variant:{default:"",primary:"nfd-text-primary-500",white:"nfd-text-white"},size:{3:"nfd-w-3 nfd-h-3",4:"nfd-w-4 nfd-h-4",8:"nfd-w-8 nfd-h-8"}},c=(0,n.forwardRef)((({variant:e,size:t,className:s},a)=>{const o=((e=null)=>(0,n.useMemo)((()=>{const t={role:"img","aria-hidden":"true"};return null!==e&&(t.focusable=e?"true":"false"),t}),[e]))();return(0,n.createElement)("svg",{ref:a,xmlns:"http://www.w3.org/2000/svg/",fill:"none",viewBox:"0 0 24 24",className:r()("nfd-animate-spin",l.variant[e],l.size[t],s),...o},(0,n.createElement)("circle",{className:"nfd-opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.createElement)("path",{className:"nfd-opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}))})),f={variant:i().oneOf((0,o.keys)(l.variant)),size:i().oneOf((0,o.keys)(l.size)),className:i().string};c.propTypes=f,c.defaultProps={variant:"default",size:"4",className:""};const p=e=>(0,n.createElement)(c,{...e});p.propTypes=f,p.defaultProps=c.defaultProps,p.displayName="Spinner";const u=c,m={variant:{primary:"nfd-button--primary",secondary:"nfd-button--secondary",error:"nfd-button--error",upsell:"nfd-button--upsell"},size:{default:"",small:"nfd-button--small",large:"nfd-button--large"}},x=(0,n.forwardRef)((({children:e,as:t,type:s,variant:a,size:o,isLoading:d,disabled:i,className:l,...c},f)=>(0,n.createElement)(t,{type:s||"button"===t&&"button"||void 0,disabled:i,ref:f,className:r()("nfd-button",m.variant[a],m.size[o],d&&"nfd-cursor-wait",i&&"nfd-button--disabled",l),...c},d&&(0,n.createElement)(u,{size:"small"===o?"3":"4",className:"nfd-mr-2"}),e))),h={children:i().node.isRequired,as:i().elementType,type:i().oneOf(["button","submit","reset"]),variant:i().oneOf((0,o.keys)(m.variant)),size:i().oneOf((0,o.keys)(m.size)),isLoading:i().bool,disabled:i().bool,className:i().string};x.propTypes=h,x.defaultProps={as:"button",type:void 0,variant:"primary",size:"default",isLoading:!1,disabled:!1,className:""};const w=x,k=e=>(0,n.createElement)(x,{...e});k.propTypes=h,k.defaultProps=x.defaultProps,k.displayName="Button";const v=window.wp.i18n,b=window.wp.apiFetch;var g=s.n(b);const y=window.React;function j({title:e,titleId:t,...s},n){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),e?y.createElement("title",{id:t},e):null,y.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const N=y.forwardRef(j);function _({title:e,titleId:t,...s},n){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),e?y.createElement("title",{id:t},e):null,y.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const E=y.forwardRef(_);function C({title:e,titleId:t,...s},n){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),e?y.createElement("title",{id:t},e):null,y.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const R=y.forwardRef(C);function O({title:e,titleId:t,...s},n){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),e?y.createElement("title",{id:t},e):null,y.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const z=y.forwardRef(O);function L({title:e,titleId:t,...s},n){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),e?y.createElement("title",{id:t},e):null,y.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),y.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const P=y.forwardRef(L);function T({title:e,titleId:t,...s},n){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),e?y.createElement("title",{id:t},e):null,y.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const S=y.forwardRef(T);function U({title:e,titleId:t,...s},n){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),e?y.createElement("title",{id:t},e):null,y.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const M=y.forwardRef(U),W=window.ReactJSXRuntime,B=(0,W.jsx)(N,{className:"size-6"}),I=(0,W.jsx)(E,{className:"size-6"}),D=(0,W.jsx)(R,{className:"size-6"}),A=(0,W.jsx)(z,{className:"size-6"}),H=(0,W.jsx)(P,{className:"size-6"}),Z=(0,W.jsx)(M,{className:"size-6"}),F=(0,W.jsx)(S,{className:"size-6"}),V=(0,W.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 stroke-current",fill:"none",viewBox:"0 0 24 24",children:(0,W.jsx)("circle",{cx:"12",cy:"12",r:"10",strokeWidth:"2",stroke:"currentColor"})}),q=(0,W.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg/",fill:"none",viewBox:"0 0 24 24",class:"next-steps-spinner nfd-animate-spin nfd-w-8 nfd-h-8",role:"img","aria-hidden":"true",children:[(0,W.jsx)("circle",{class:"nfd-opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,W.jsx)("path",{class:"nfd-opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),$={size:{1:"nfd-title--1",2:"nfd-title--2",3:"nfd-title--3",4:"nfd-title--4",5:"nfd-title--5"}},J=(0,n.forwardRef)((({children:e,as:t,size:s,className:a,...o},d)=>(0,n.createElement)(t,{ref:d,className:r()("nfd-title",$.size[s||t[1]],a),...o},e))),X={children:i().node.isRequired,as:i().elementType,size:i().oneOf(Object.keys($.size)),className:i().string};J.propTypes=X,J.defaultProps={as:"h1",size:void 0,className:""};const Y=e=>(0,n.createElement)(J,{...e});Y.propTypes=X,Y.defaultProps=J.defaultProps,Y.displayName="Title";const G=J,K=({completed:e,total:t})=>{const s=t?Math.round(e/t*100):0;return(0,W.jsxs)("div",{className:`nfd-progress-bar nfd-progress-bar-${s}`,children:[(0,W.jsx)("div",{className:"nfd-progress-bar-inner","data-percent":s,style:{width:`${s}%`}}),(0,W.jsxs)("span",{className:"nfd-progress-bar-label",children:[e,"/",t]})]})},Q=e=>{const{step:t,taskUpdateCallback:s,track:n,section:a,showDismissed:r,...o}=e,{id:d,title:i="",status:l,href:c,data_attributes:f={}}=t,p=()=>c.includes("{siteUrl}")?c.replace("{siteUrl}",window.NewfoldRuntime.siteUrl):c,u=()=>c.includes("{siteUrl}")||c.includes(window.NewfoldRuntime.siteUrl)?"":"_blank",m={...(()=>{const e={};return Object.entries(f).forEach((([t,s])=>{const n=t.startsWith("data-")?t:`data-${t}`;e[n]="boolean"==typeof s?s?"true":"false":s})),e})()},x=(e=!1,t="")=>(0,W.jsxs)("div",{className:"nfd-nextsteps-step-content nfd-flex nfd-flex-col nfd-justify-between",children:[e&&(0,W.jsx)("a",{href:e,target:t,children:(0,W.jsx)(G,{as:"span",className:"nfd-nextsteps-step-title nfd-font-normal",children:i})}),!e&&(0,W.jsx)(G,{as:"span",className:"nfd-nextsteps-step-title nfd-font-normal",children:i})]});return(0,W.jsxs)(W.Fragment,{children:["new"===l&&(0,W.jsx)("div",{className:"nfd-nextsteps-step-container",id:d,...m,children:(0,W.jsxs)("div",{className:"nfd-nextsteps-step nfd-nextsteps-step-new nfd-flex nfd-flex-row nfd-justify-start nfd-items-center nfd-gap-4",children:[(0,W.jsx)("div",{className:"nfd-nextsteps-buttons nfd-flex nfd-flex-row nfd-gap-2 nfd-justify-end",children:(0,W.jsx)("button",{className:"nfd-nextsteps-button nfd-nextsteps-button-todo","data-nfd-click":"nextsteps_step_check","data-nfd-event-category":"nextsteps_step","data-nfd-event-key":d,onClick:e=>s(n,a,d,"done"),title:(0,v.__)("Mark Complete","wp-module-next-steps"),children:V})}),x(p(),u()),(0,W.jsxs)("div",{className:"nfd-nextsteps-buttons nfd-flex nfd-flex-row nfd-gap-4 nfd-justify-end nfd-ml-auto",children:[(0,W.jsx)("button",{className:"nfd-nextsteps-button nfd-nextsteps-button-dismiss","data-nfd-click":"nextsteps_step_dismiss","data-nfd-event-category":"nextsteps_step","data-nfd-event-key":d,onClick:e=>s(n,a,d,"dismissed"),title:(0,v.__)("Skip","wp-module-next-steps"),children:A}),(0,W.jsx)("a",{className:"nfd-nextsteps-button nfd-nextsteps-button-link","data-nfd-click":"nextsteps_step_link","data-nfd-event-category":"nextsteps_step","data-nfd-event-key":d,href:p(),target:u(),title:i,children:F})]})]})}),"done"===l&&(0,W.jsx)("div",{className:"nfd-nextsteps-step-container",id:d,...m,children:(0,W.jsxs)("div",{className:"nfd-nextsteps-step nfd-nextsteps-step-done nfd-flex nfd-flex-row nfd-justify-start nfd-items-center nfd-gap-4",children:[(0,W.jsx)("div",{className:"nfd-nextsteps-buttons nfd-flex nfd-flex-row nfd-gap-2 nfd-justify-end",children:(0,W.jsx)("button",{className:"nfd-nextsteps-button nfd-nextsteps-button-redo","data-nfd-click":"nextsteps_step_redo","data-nfd-event-category":"nextsteps_step","data-nfd-event-key":d,onClick:e=>s(n,a,d,"new"),title:(0,v.__)("Restart","wp-module-next-steps"),children:Z})}),x()]})}),"dismissed"===l&&r&&(0,W.jsx)("div",{className:"nfd-nextsteps-step-container",id:d,...m,children:(0,W.jsxs)("div",{className:"nfd-nextsteps-step nfd-nextsteps-step-dismissed nfd-flex nfd-flex-row nfd-justify-start nfd-items-center nfd-gap-4",children:[(0,W.jsx)("div",{className:"nfd-nextsteps-buttons nfd-flex nfd-flex-row nfd-gap-2 nfd-justify-end",children:(0,W.jsx)("button",{className:"nfd-nextsteps-button nfd-nextsteps-button-redo","data-nfd-click":"nextsteps_step_redo","data-nfd-event-category":"nextsteps_step","data-nfd-event-key":d,onClick:e=>s(n,a,d,"new"),title:(0,v.__)("Unskip","wp-module-next-steps"),children:Z})}),x(),(0,W.jsx)("div",{className:"nfd-nextsteps-buttons nfd-flex nfd-flex-row nfd-gap-4 nfd-justify-end nfd-ml-auto",children:(0,W.jsx)("button",{className:"nfd-nextsteps-button nfd-nextsteps-button-dismiss","data-nfd-click":"nextsteps_step_dismiss","data-nfd-event-category":"nextsteps_step","data-nfd-event-key":d,onClick:e=>s(n,a,d,"new"),title:(0,v.__)("Unskip","wp-module-next-steps"),children:H})})]})})]})},ee=e=>{const{section:t,index:s,taskUpdateCallback:n,sectionOpenCallback:a,track:r,showDismissed:o,...d}=e;let i=void 0!==t.open?t.open:0===s;const l=t.tasks.filter((e=>"done"===e.status)).length,c=t.tasks.filter((e=>"dismissed"!==e.status)).length;return l===c&&!0!==t.open&&(i=!1),(c>0||!0===o)&&(0,W.jsxs)("details",{className:"nfd-section",open:i,...d,children:[(0,W.jsxs)("summary",{className:"nfd-section-header",onClick:e=>{a(t.id,!i)},children:[(0,W.jsxs)(G,{className:"nfd-section-title mb-0",as:"h3",children:[(0,W.jsxs)("span",{className:"nfd-section-header-icon nfd-header-icon",children:[(0,W.jsx)("span",{className:"nfd-section-header-icon-closed",children:I}),(0,W.jsx)("span",{className:"nfd-section-header-icon-opened",children:D})]}),t.label]}),c>0&&(0,W.jsx)(K,{completed:l,total:c})]}),(0,W.jsx)("div",{className:"nfd-section-steps",children:t.tasks.map((e=>(0,W.jsx)(Q,{step:e,taskUpdateCallback:n,showDismissed:o,track:r,section:t.id},e.id)))})]})},te=e=>{const{track:t,index:s,taskUpdateCallback:n,sectionOpenCallback:a,showDismissed:r,...o}=e,d=0===s;return(0,W.jsxs)("details",{className:"nfd-track",open:d,...o,children:[(0,W.jsxs)("summary",{className:"nfd-track-header",children:[(0,W.jsx)(G,{className:"nfd-track-title mb-0",as:"h2",children:t.label}),(0,W.jsx)("span",{className:"nfd-track-header-icon nfd-header-icon",children:B})]}),(0,W.jsx)("div",{className:"nfd-track-sections",children:t.sections.map(((e,s)=>(0,W.jsx)(ee,{section:e,index:s,taskUpdateCallback:n,sectionOpenCallback:a,track:t.id,showDismissed:r},e.id)))})]})},se=()=>{const[e,t]=(0,n.useState)(window.NewfoldNextSteps),[s,a]=(0,n.useState)(!1),r=(s,n,a,r)=>{var o;o={plan:e.id,track:s,section:n,task:a,status:r},g()({url:window.NewfoldRuntime.restUrl+"newfold-next-steps/v1/steps/status",method:"PUT",data:o}).then((e=>{console.log("Response from taskUpdateWrapper:",e),(e=>{console.log("Task update response:",e),window.NewfoldNextSteps=e,t(e)})(e)})).catch((e=>{console.error("Error from taskUpdateWrapper:",e),(e=>{console.error("Error updating step:",e)})(e)}))},o=(t,s)=>{console.log("Section open callback:",t,s);let n=null;if(e&&e.tracks)for(const s of e.tracks)if(s.sections&&s.sections.some((e=>e.id===t))){n=s.id;break}var a;n?(a={plan:e.id,track:n,section:t,open:s},g()({url:window.NewfoldRuntime.restUrl+"newfold-next-steps/v1/steps/section/open",method:"PUT",data:a}).then((e=>{console.log("Section update response:",e),(e=>{console.log("Section open state updated successfully:",e)})(e)})).catch((e=>{console.error("Error updating section:",e),(e=>{console.error("Error updating section open state:",e)})(e)}))):console.error("Could not find track for section:",t)};return e&&e.tracks?(0,W.jsxs)("div",{className:"nfd-nextsteps",id:"nfd-nextsteps",children:[(0,W.jsx)("p",{className:"nfd-pb-4",children:e.description}),e.tracks.map(((e,t)=>(0,W.jsx)(te,{track:e,index:t,taskUpdateCallback:r,sectionOpenCallback:o,showDismissed:s},e.id))),(0,W.jsx)("div",{className:"nfd-nextsteps-filters nfd-flex nfd-flex-row nfd-gap-2 nfd-justify-center",children:(0,W.jsxs)(w,{className:"nfd-nextsteps-filter-button","data-nfd-click":"nextsteps_step_toggle","data-nfd-event-category":"nextsteps_toggle","data-nfd-event-key":"toggle",onClick:()=>{a(!s)},variant:"secondary",children:[A,s?(0,v.__)("Hide skipped tasks","wp-module-next-steps"):(0,v.__)("View skipped tasks","wp-module-next-steps")]})})]}):(0,W.jsxs)("div",{className:"nfd-nextsteps",id:"nfd-nextsteps",children:[q,(0,W.jsx)("p",{children:(0,v.__)("Loading next steps...","wp-module-next-steps")})]})},ne=()=>{const[e,t]=(0,n.useState)(null);return(0,n.useEffect)((()=>{const e=window.NFDPortalRegistry;if(!e)return;const s=e=>{t(e)};e.onReady("next-steps",s),e.onRemoved("next-steps",(()=>{t(null)}));const n=e.getElement("next-steps");n&&s(n)}),[e]),e?(0,n.createPortal)((0,W.jsx)("div",{className:"next-steps-fill",children:(0,W.jsx)(se,{})}),e):null};let ae=null;const re=()=>(0,W.jsx)(ne,{});t()((()=>{const e=document.getElementById("nfd-next-steps-portal");null!==e&&void 0!==n.createRoot&&(ae||(ae=(0,n.createRoot)(e)),ae.render((0,W.jsx)(re,{})))}))})()})();